<div class="container mt-4" style="padding-left: 70px; padding-top: 50px">
  <table id="myTable" class="table table-striped table-bordered table-hover">
    <thead>
      <tr>
        <th>COD</th>
        <th>Nombre</th>
        <th>METODO PAGO</th>
        <th>TOTAL</th>
        <th>Detalle</th>
        <th>Get Pdf</th>
        <th>Eliminar</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let factura of facturas">
        <td>{{ factura.uuid }}</td>
        <td>{{ factura.nombre }}</td>
        <td>{{ factura.metodoPago }}</td>
        <td>S/.{{ factura.total }}</td>

        <td>
          <!--           <button class="editBtn" (click)="openEditModal(producto)">-->
          <button class="detalleBtn" (click)="openDetalleModal(factura)">
            <i class="fa fa-eye" aria-hidden="true"></i>
          </button>
        </td>
        <td>
          <!--           <button class="editBtn" (click)="openEditModal(producto)">-->
          <button class="editBtn" (click)="downloadFile(factura)">
            <i class="fas fa-download"></i>
          </button>
        </td>
        <td>
          <!--              <button class="deleteBtn" (click)="eliminarProducto(producto)"> -->
          <button class="deleteBtn" (click)="eliminarVenta(factura)">
            <i class="fas fa-trash-alt"></i>
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<div class="container mt-4" style="padding-left: 70px; padding-top: 50px">
  <!-- Modal Detalle -->
  <div class="custom-modal" [class.show-modal]="mostrarModal">
    <div class="modal-content">
      <h2>Detalle Factura</h2>

      <div *ngIf="facturaSeleccionada">
        <h4 style="text-align: center">{{ facturaSeleccionada.uuid }}</h4>

        <div
          style="
            display: flex;
            gap: 1rem;
            justify-content: space-between;
            margin: 1rem;
          "
        >
          <div>
            <h4>Cliente</h4>

            <p>{{ facturaSeleccionada.nombre }}</p>
          </div>
          <div>
            <h4>Telefono</h4>

            <p>{{ facturaSeleccionada.telefono }}</p>
          </div>
          <div>
            <h4>MetodoPago</h4>

            <p>{{ facturaSeleccionada.metodoPago }}</p>
          </div>
        </div>

        <div
          style="
            display: flex;
            gap: 1rem;
            justify-content: space-between;
            margin: 1rem;
          "
        >
          <div>
            <h4>Correo</h4>

            <p>{{ facturaSeleccionada.email }}</p>
          </div>

          <div>
            <h4>Creado por:</h4>

            <p>{{ facturaSeleccionada.create }}</p>
          </div>
        </div>
      </div>

      <table id="nuevaTabla">
        <thead>
          <tr>
            <th>Image</th>
            <th>Nombre</th>
            <th>Categoria</th>
            <th>Cantidad</th>
            <th>Precio Unitario</th>
            <th>Sub Total</th>
          </tr>
        </thead>
        <tbody>
          <!-- Itera sobre los elementos del detalle de la factura -->
          <tr *ngFor="let detalle of detalleProductoFacturaSeleccionada">
            <td>
              <img style="width: 100px" src="{{ detalle.image }}" alt="" />
            </td>
            <td>{{ detalle.nombre }}</td>
            <td>{{ detalle.categoria_nombre }}</td>
            <td>{{ detalle.cantidad }}</td>
            <td>{{ detalle.precio }}</td>
            <td>{{ detalle.cantidad * detalle.precio }}</td>
          </tr>
        </tbody>
      </table>
      <h4 *ngIf="facturaSeleccionada" style="margin: 2rem">
        Total: {{ facturaSeleccionada.total }}
      </h4>
      <button class="modal-close-button" (click)="closeModal()">Cerrar</button>
    </div>
  </div>
</div>
